---
title: Flujo de Valor - Venta de Producto
---
graph TB
    START(["ğŸ›’ INICIO: Cliente quiere comprar"])
    
    %% Paso 1: VerificaciÃ³n
    STEP1["ğŸ“‹ PASO 1: Verificar Disponibilidad<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Sistema consulta stock en tiempo real<br/>âœ“ Stock disponible en tienda local<br/>âœ“ Respuesta instantÃ¡nea"]
    
    %% DecisiÃ³n 1
    CHECK1{Â¿Stock<br/>disponible?}
    
    NO_STOCK["âŒ SIN STOCK<br/>â”â”â”â”â”â”â”â”â”<br/>â€¢ Notificar al cliente<br/>â€¢ Sugerir tiendas cercanas<br/>â€¢ OpciÃ³n de reservar en otra tienda"]
    
    %% Paso 2: Reserva
    STEP2["ğŸ”’ PASO 2: Crear Reserva<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Bloqueo temporal del producto<br/>âœ“ Stock reservado por 30 minutos<br/>âœ“ Previene doble venta<br/>âœ“ Evento publicado en tiempo real"]
    
    %% Paso 3: Proceso de Venta
    STEP3["ğŸ’³ PASO 3: Procesar Pago<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Cliente procede con la compra<br/>Tiempo lÃ­mite: 30 minutos"]
    
    %% DecisiÃ³n 2
    CHECK2{Â¿Pago<br/>exitoso?}
    
    %% CancelaciÃ³n
    CANCEL["âŒ CANCELAR RESERVA<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Stock liberado automÃ¡ticamente<br/>âœ“ Disponible para otros clientes<br/>âœ“ Evento de cancelaciÃ³n publicado"]
    
    %% ExpiraciÃ³n
    EXPIRE["â° EXPIRACIÃ“N AUTOMÃTICA<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Reserva vencida (30 min)<br/>âœ“ Stock liberado automÃ¡ticamente<br/>âœ“ Sin intervenciÃ³n manual<br/>âœ“ Evento de expiraciÃ³n publicado"]
    
    %% ConfirmaciÃ³n
    STEP4["âœ… PASO 4: Confirmar Venta<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Venta completada exitosamente<br/>âœ“ Stock actualizado permanentemente<br/>âœ“ Reserva convertida en venta<br/>âœ“ Evento de confirmaciÃ³n publicado"]
    
    %% Paso 5: Notificaciones
    STEP5["ğŸ“¡ PASO 5: Notificaciones AutomÃ¡ticas<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>âœ“ Dashboard actualizado en tiempo real<br/>âœ“ Alerta si stock bajo umbral<br/>âœ“ SincronizaciÃ³n con ERP<br/>âœ“ MÃ©tricas de ventas actualizadas"]
    
    END(["ğŸ‰ FIN: Venta Completada"])
    END_CANCEL(["â†©ï¸ FIN: Reserva Cancelada"])
    
    %% Flujo Principal
    START --> STEP1
    STEP1 --> CHECK1
    
    CHECK1 -->|"âœ… SÃ"| STEP2
    CHECK1 -->|"âŒ NO"| NO_STOCK
    
    STEP2 --> STEP3
    STEP3 --> CHECK2
    
    CHECK2 -->|"âœ… SÃ"| STEP4
    CHECK2 -->|"âŒ NO"| CANCEL
    
    STEP3 -.->|"â±ï¸ Timeout 30min"| EXPIRE
    
    STEP4 --> STEP5
    STEP5 --> END
    
    CANCEL --> END_CANCEL
    EXPIRE --> END_CANCEL
    
    %% Notas laterales
    NOTE1["ğŸ’¡ VALOR DE NEGOCIO<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Previene overselling<br/>â€¢ Experiencia de usuario fluida<br/>â€¢ Datos en tiempo real<br/>â€¢ IntegraciÃ³n automÃ¡tica"]
    
    NOTE2["ğŸ›¡ï¸ CONFIABILIDAD<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ Re-intentos automÃ¡ticos<br/>â€¢ Sin pÃ©rdida de eventos<br/>â€¢ AuditorÃ­a completa<br/>â€¢ Trazabilidad total"]
    
    STEP2 -.->|"Beneficio"| NOTE1
    STEP5 -.->|"GarantÃ­a"| NOTE2
    
    %% Estilos
    classDef start fill:#4CAF50,stroke:#2E7D32,stroke-width:4px,color:#fff
    classDef process fill:#2196F3,stroke:#1565C0,stroke-width:3px,color:#fff
    classDef decision fill:#FF9800,stroke:#E65100,stroke-width:3px,color:#fff
    classDef success fill:#4CAF50,stroke:#2E7D32,stroke-width:3px,color:#fff
    classDef error fill:#F44336,stroke:#C62828,stroke-width:3px,color:#fff
    classDef notification fill:#9C27B0,stroke:#6A1B9A,stroke-width:3px,color:#fff
    classDef note fill:#FFE082,stroke:#F57C00,stroke-width:2px,color:#000
    classDef end fill:#4CAF50,stroke:#2E7D32,stroke-width:4px,color:#fff
    
    class START start
    class STEP1,STEP2,STEP3,STEP4 process
    class CHECK1,CHECK2 decision
    class CANCEL,NO_STOCK,EXPIRE error
    class STEP5 notification
    class NOTE1,NOTE2 note
    class END,END_CANCEL end
